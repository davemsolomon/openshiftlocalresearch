
## Find out which images i need to mirror:
> oc get packagemanifest etcd-operator -o yaml | grep -A 4 relatedImages

## Do the block
## etcd_block.yml
apiVersion: config.openshift.io/v1
kind: Image
metadata:
  name: cluster
spec:
  registrySources:
    blockedRegistries:
    - "quay.io/etcd-operator"
  additionalTrustedCA:
    name: ""

## implement a mirror
## etcd_mirror.yml
apiVersion: operator.openshift.io/v1alpha1
kind: ImageContentSourcePolicy
metadata:
  name: etcd-mirror
spec:
  repositoryDigestMirrors:
  - mirrors:
    - ghcr.io/davemsolomon/etcd-operator/etcd
    source: quay.io/etcd-operator/etcd
  - mirrors:
    - ghcr.io/davemsolomon/etcd-operator/operator
    source: quay.io/etcd-operator/operator
